// Handles the upload to Sonatype.
// Adapted from http://jedicoder.blogspot.com/2011/11/automated-gradle-project-deployment-to.html.

uploadArchives {
    repositories {
        mavenDeployer {
            beforeDeployment { MavenDeployment deployment -> signing.signPom(deployment) }

            repository(url: "https://oss.sonatype.org/service/local/staging/deploy/maven2/") {
              authentication(userName: sonatypeUsername, password: sonatypePassword)
            }

            snapshotRepository(url: "https://oss.sonatype.org/content/repositories/snapshots/") {
              authentication(userName: sonatypeUsername, password: sonatypePassword)
            }

            pom.project {
               artifactId 'androidsvg-aar'
               name 'AndroidSVG'
               packaging 'aar'
               description 'SVG rendering library for Android'
               url 'http://bigbadaboom.github.io/androidsvg/'

               scm {
                   url 'https://github.com/BigBadaboom/androidsvg'
                   connection 'https://github.com/BigBadaboom/androidsvg'
                   developerConnection 'https://github.com/BigBadaboom/androidsvg'
               }

               licenses {
                   license {
                       name 'The Apache Software License, Version 2.0'
                       url 'http://www.apache.org/licenses/LICENSE-2.0.txt'
                       distribution 'repo'
                   }
               }

               developers {
                   developer {
                       id 'BigBadaboom'
                       name 'Paul LeBeau'
                   }
               }
           }
        }
    }
}
